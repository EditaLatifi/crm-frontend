{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Desktop/CRM/frontend/app/%28app%29/tasks/%5Bid%5D/page.tsx"],"sourcesContent":["\"use client\";\r\nimport { Box, Heading, Text, VStack, HStack, Input, Textarea, Divider, Tag, Avatar, Button, Flex, Icon, Stack, Menu, MenuButton, MenuList, MenuItem, Select, useToast } from \"@chakra-ui/react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport { loadTokenFromStorage } from \"../../../../src/auth/tokenStore\";\r\n// import { fetchWithAuth } from '../../../../src/api/client';\r\nimport { useParams } from \"next/navigation\";\r\nimport { FiClock, FiUser, FiMessageCircle, FiList, FiEdit2 } from \"react-icons/fi\";\r\nimport { useAuth } from \"../../../../src/auth/AuthProvider\";\r\nimport { fetchWithAuth } from \"../../../../src/api/client\";\r\n\r\nexport default function TaskDetailsPage() {\r\n  // Ensure token is loaded from storage on every mount\r\n  useEffect(() => {\r\n    loadTokenFromStorage();\r\n  }, []);\r\n  const { user } = useAuth();\r\n  const params = useParams();\r\n  const taskId = params?.id;\r\n  const [task, setTask] = useState<any>(null);\r\n  const [comments, setComments] = useState<any[]>([]);\r\n  const [history, setHistory] = useState<any[]>([]);\r\n  const [timeEntries, setTimeEntries] = useState<any[]>([]);\r\n  const [newComment, setNewComment] = useState(\"\");\r\n  const [newTime, setNewTime] = useState({ startedAt: '', endedAt: '', durationMinutes: '', description: '' });\r\n  const [priority, setPriority] = useState('');\r\n  const [users, setUsers] = useState<any[]>([]);\r\n  const [assigning, setAssigning] = useState(false);\r\n  const [loadingComment, setLoadingComment] = useState(false);\r\n  const [loadingTime, setLoadingTime] = useState(false);\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [editTitle, setEditTitle] = useState(\"\");\r\n  const [editDescription, setEditDescription] = useState(\"\");\r\n  const [saving, setSaving] = useState(false);\r\n  const toast = useToast();\r\n\r\n  const fetchTask = () => {\r\n    if (!taskId) return;\r\n    fetch(`/api/tasks/${taskId}`)\r\n      .then(res => res.json())\r\n      .then(data => {\r\n        setTask(data);\r\n        setComments(data.comments || []);\r\n        setHistory(data.history || []);\r\n        setTimeEntries(data.timeEntries || []);\r\n        setPriority(data.priority || '');\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    fetchTask();\r\n    fetch('/api/users')\r\n      .then(res => res.json())\r\n      .then(setUsers);\r\n  }, [taskId]);\r\n  const handleAssignUser = async (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const userId = e.target.value;\r\n    setAssigning(true);\r\n    await fetch(`/api/tasks/${taskId}`, {\r\n      method: 'PATCH',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ assignedToUserId: userId })\r\n    });\r\n    fetchTask();\r\n    setAssigning(false);\r\n    toast({ status: 'success', title: 'Task assigned!' });\r\n  };\r\n\r\n\r\n  const statusOptions = [\r\n    { key: 'OPEN', label: 'To Do' },\r\n    { key: 'IN_PROGRESS', label: 'In Progress' },\r\n    { key: 'DONE', label: 'Done' },\r\n  ];\r\n\r\n  const handleMove = async (newStatus: string) => {\r\n    if (newStatus === task.status) return;\r\n    await fetch(`/api/tasks/${task.id}/status`, {\r\n      method: 'PATCH',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ status: newStatus })\r\n    });\r\n    fetchTask();\r\n  };\r\n\r\n  const handleAddComment = async () => {\r\n    if (!newComment.trim()) return;\r\n    setLoadingComment(true);\r\n    try {\r\n      // Use fetchWithAuth for authenticated requests\r\n      const res = await fetchWithAuth(`/api/tasks/${taskId}/comments`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ text: newComment })\r\n      });\r\n      setNewComment(\"\");\r\n      fetchTask();\r\n      toast({ status: 'success', title: 'Comment added!' });\r\n    } catch (e: any) {\r\n      toast({ status: 'error', title: 'Failed to add comment', description: e?.message || String(e) });\r\n    }\r\n    setLoadingComment(false);\r\n  };\r\n\r\n  const handleAddTime = async () => {\r\n    if (!newTime.startedAt || !newTime.endedAt || !newTime.durationMinutes) return;\r\n    setLoadingTime(true);\r\n    try {\r\n      const accountId = task?.accountId;\r\n      if (!accountId) {\r\n        toast({ status: 'error', title: 'No account associated with this task.' });\r\n        setLoadingTime(false);\r\n        return;\r\n      }\r\n      const res = await fetch(`/api/tasks/${taskId}/time-entries`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ ...newTime, userId: user?.id, accountId }),\r\n      });\r\n      if (res.ok) {\r\n        setNewTime({ startedAt: '', endedAt: '', durationMinutes: '', description: '' });\r\n        fetchTask();\r\n        toast({ status: 'success', title: 'Time entry added!' });\r\n      } else {\r\n        const err = await res.text();\r\n        toast({ status: 'error', title: 'Failed to add time entry', description: err });\r\n      }\r\n    } catch (e) {\r\n      toast({ status: 'error', title: 'Failed to add time entry', description: String(e) });\r\n    }\r\n    setLoadingTime(false);\r\n  };\r\n\r\n  const handlePriorityChange = async (e: any) => {\r\n    const newPriority = e.target.value;\r\n    setPriority(newPriority);\r\n    await fetch(`/api/tasks/${taskId}/priority`, {\r\n      method: 'PATCH',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({ priority: newPriority })\r\n    });\r\n    fetchTask();\r\n  };\r\n\r\n  const startEdit = () => {\r\n    setEditTitle(task.title);\r\n    setEditDescription(task.description || \"\");\r\n    setEditMode(true);\r\n  };\r\n  const cancelEdit = () => {\r\n    setEditMode(false);\r\n  };\r\n  const saveEdit = async () => {\r\n    setSaving(true);\r\n    try {\r\n      await fetch(`/api/tasks/${taskId}`, {\r\n        method: \"PATCH\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ title: editTitle, description: editDescription }),\r\n      });\r\n      setEditMode(false);\r\n      fetchTask();\r\n      toast({ status: 'success', title: 'Task updated!' });\r\n    } catch (e) {\r\n      toast({ status: 'error', title: 'Failed to update task', description: String(e) });\r\n    }\r\n    setSaving(false);\r\n  };\r\n\r\n  if (!task) return <Box p={8}>Loading...</Box>;\r\n\r\n  return (\r\n    <Flex direction={{ base: \"column\", md: \"row\" }} gap={8} p={8}>\r\n      {/* Main Task Info */}\r\n      <Box flex={2} bg=\"#fff\" p={6} borderRadius=\"lg\" boxShadow=\"md\">\r\n        <HStack mb={4} spacing={4} align=\"center\">\r\n          <Tag colorScheme=\"blue\" size=\"lg\">TASK-{task.id}</Tag>\r\n          <Tag colorScheme=\"purple\">{task.status}</Tag>\r\n          <Select value={priority} onChange={handlePriorityChange} size=\"sm\" width=\"140px\" minW=\"140px\">\r\n            <option value=\"LOW\">Low</option>\r\n            <option value=\"MEDIUM\">Medium</option>\r\n            <option value=\"HIGH\">High</option>\r\n          </Select>\r\n          <Menu>\r\n            <MenuButton as={Button} size=\"sm\" colorScheme=\"blue\" variant=\"outline\">\r\n              Move to...\r\n            </MenuButton>\r\n            <MenuList>\r\n              {statusOptions.filter(opt => opt.key !== task.status).map(opt => (\r\n                <MenuItem key={opt.key} onClick={() => handleMove(opt.key)}>{opt.label}</MenuItem>\r\n              ))}\r\n            </MenuList>\r\n          </Menu>\r\n        </HStack>\r\n        <HStack mb={4} spacing={4}>\r\n          <Avatar size=\"sm\" name={task.assigneeName || \"Assignee\"} />\r\n          <Select\r\n            value={task.assignedToUserId || ''}\r\n            onChange={handleAssignUser}\r\n            size=\"sm\"\r\n            width=\"180px\"\r\n            minW=\"120px\"\r\n            isDisabled={assigning}\r\n          >\r\n            <option value=\"\">Unassigned</option>\r\n            {users.map(u => (\r\n              <option key={u.id} value={u.id}>{u.name || u.email || u.id}</option>\r\n            ))}\r\n          </Select>\r\n          <Icon as={FiClock} />\r\n          <Text>Due: {task.dueDate ? new Date(task.dueDate).toLocaleDateString() : \"-\"}</Text>\r\n          <Icon as={FiClock} />\r\n          <Text>Estimate: {task.estimate || \"-\"}h</Text>\r\n        </HStack>\r\n        <Heading size=\"lg\" mb={2} display=\"flex\" alignItems=\"center\" gap={2}>\r\n          {editMode ? (\r\n            <Input value={editTitle} onChange={e => setEditTitle(e.target.value)} size=\"lg\" fontWeight=\"bold\" />\r\n          ) : (\r\n            <>{task.title}</>\r\n          )}\r\n          <Icon as={FiEdit2} boxSize={4} color=\"gray.400\" cursor=\"pointer\" onClick={startEdit} />\r\n        </Heading>\r\n        {editMode ? (\r\n          <>\r\n            <Textarea value={editDescription} onChange={e => setEditDescription(e.target.value)} mb={2} />\r\n            <HStack mb={4}>\r\n              <Button colorScheme=\"blue\" size=\"sm\" onClick={saveEdit} isLoading={saving}>Save</Button>\r\n              <Button size=\"sm\" onClick={cancelEdit}>Cancel</Button>\r\n            </HStack>\r\n          </>\r\n        ) : (\r\n          <Text color=\"gray.600\" mb={4}>{task.description || <i>No description</i>}</Text>\r\n        )}\r\n        <Divider my={4} />\r\n        {/* Subtasks/Parent */}\r\n        {task.parentTaskId && (\r\n          <Box mb={4}>\r\n            <Text fontSize=\"sm\" color=\"gray.500\">Parent Task:</Text>\r\n            <Tag colorScheme=\"blue\">TASK-{task.parentTaskId}</Tag>\r\n          </Box>\r\n        )}\r\n        {task.subtasks && task.subtasks.length > 0 && (\r\n          <Box mb={4}>\r\n            <Text fontSize=\"sm\" color=\"gray.500\">Subtasks:</Text>\r\n            <Stack direction=\"column\" spacing={1} mt={1}>\r\n              {task.subtasks.map((sub: any) => (\r\n                <Tag key={sub.id} colorScheme=\"blue\" variant=\"outline\">TASK-{sub.id}: {sub.title}</Tag>\r\n              ))}\r\n            </Stack>\r\n          </Box>\r\n        )}\r\n      </Box>\r\n\r\n      {/* Side Panel: Time, Comments & History */}\r\n      <VStack flex={1} align=\"stretch\" spacing={6}>\r\n        {/* Time Tracking */}\r\n        <Box bg=\"#fff\" p={4} borderRadius=\"lg\" boxShadow=\"md\">\r\n          <Heading size=\"md\" mb={2} display=\"flex\" alignItems=\"center\" gap={2}>\r\n            <Icon as={FiClock} /> Time Tracking\r\n          </Heading>\r\n          <VStack align=\"stretch\" spacing={2} maxH=\"150px\" overflowY=\"auto\">\r\n            {timeEntries.length === 0 && <Text color=\"gray.400\">No time entries yet.</Text>}\r\n            {timeEntries.map((t, i) => (\r\n              <Box key={i} p={2} bg=\"gray.50\" borderRadius=\"md\">\r\n                <HStack spacing={2} mb={1}>\r\n                  <Avatar size=\"xs\" name={t.user?.name || t.userId || 'User'} />\r\n                  <Text fontWeight=\"bold\" fontSize=\"sm\">{t.user?.name || t.userId || 'User'}</Text>\r\n                  {t.account?.name && (\r\n                    <Text fontSize=\"xs\" color=\"gray.500\">Account: {t.account.name}</Text>\r\n                  )}\r\n                  {t.task?.title && (\r\n                    <Text fontSize=\"xs\" color=\"gray.500\">Task: {t.task.title}</Text>\r\n                  )}\r\n                  <Text fontSize=\"xs\" color=\"gray.500\">{t.startedAt ? new Date(t.startedAt).toLocaleString() : ''} - {t.endedAt ? new Date(t.endedAt).toLocaleString() : ''}</Text>\r\n                </HStack>\r\n                <Text fontSize=\"sm\">{t.description || ''} ({t.durationMinutes} min)</Text>\r\n              </Box>\r\n            ))}\r\n            <Text fontWeight=\"bold\" color=\"blue.600\" mt={2}>Total: {timeEntries.reduce((sum, t) => sum + (t.durationMinutes || 0), 0)} min</Text>\r\n          </VStack>\r\n          <Stack direction=\"row\" mt={3} spacing={2}>\r\n            <Input type=\"datetime-local\" size=\"sm\" value={newTime.startedAt} onChange={e => setNewTime(nt => ({ ...nt, startedAt: e.target.value }))} placeholder=\"Start\" />\r\n            <Input type=\"datetime-local\" size=\"sm\" value={newTime.endedAt} onChange={e => setNewTime(nt => ({ ...nt, endedAt: e.target.value }))} placeholder=\"End\" />\r\n            <Input type=\"number\" size=\"sm\" value={newTime.durationMinutes} onChange={e => setNewTime(nt => ({ ...nt, durationMinutes: e.target.value }))} placeholder=\"Minutes\" min={1} />\r\n            <Input size=\"sm\" value={newTime.description} onChange={e => setNewTime(nt => ({ ...nt, description: e.target.value }))} placeholder=\"Description\" />\r\n            <Button colorScheme=\"blue\" size=\"sm\" onClick={handleAddTime} isLoading={loadingTime}>Add</Button>\r\n          </Stack>\r\n        </Box>\r\n\r\n        {/* Comments */}\r\n        <Box bg=\"#fff\" p={4} borderRadius=\"lg\" boxShadow=\"md\">\r\n          <Heading size=\"md\" mb={2} display=\"flex\" alignItems=\"center\" gap={2}>\r\n            <Icon as={FiMessageCircle} /> Comments\r\n          </Heading>\r\n          <VStack align=\"stretch\" spacing={3} maxH=\"250px\" overflowY=\"auto\">\r\n            {comments.length === 0 && <Text color=\"gray.400\">No comments yet.</Text>}\r\n            {comments.map((c, i) => (\r\n              <Box key={i} p={2} bg=\"gray.50\" borderRadius=\"md\">\r\n                <HStack spacing={2} mb={1}>\r\n                  <Avatar size=\"xs\" name={c.author?.name || c.authorId || \"User\"} />\r\n                  <Text fontWeight=\"bold\" fontSize=\"sm\">{c.author?.name || c.authorId || \"User\"}</Text>\r\n                  <Text fontSize=\"xs\" color=\"gray.500\">{c.createdAt ? new Date(c.createdAt).toLocaleString() : \"\"}</Text>\r\n                </HStack>\r\n                <Text fontSize=\"sm\">{c.text}</Text>\r\n              </Box>\r\n            ))}\r\n          </VStack>\r\n          <HStack mt={3} spacing={2}>\r\n            <Input\r\n              placeholder=\"Add a comment...\"\r\n              value={newComment}\r\n              onChange={e => setNewComment(e.target.value)}\r\n              size=\"sm\"\r\n            />\r\n            <Button colorScheme=\"blue\" size=\"sm\" onClick={handleAddComment} isLoading={loadingComment}>Comment</Button>\r\n          </HStack>\r\n        </Box>\r\n\r\n        {/* History */}\r\n        <Box bg=\"#fff\" p={4} borderRadius=\"lg\" boxShadow=\"md\">\r\n          <Heading size=\"md\" mb={2} display=\"flex\" alignItems=\"center\" gap={2}>\r\n            <Icon as={FiList} /> History\r\n          </Heading>\r\n          <VStack align=\"stretch\" spacing={2} maxH=\"150px\" overflowY=\"auto\">\r\n            {history.length === 0 && <Text color=\"gray.400\">No history yet.</Text>}\r\n            {history.map((h, i) => (\r\n              <Box key={i} p={2} bg=\"gray.50\" borderRadius=\"md\">\r\n                <HStack spacing={2} mb={1}>\r\n                  <Avatar size=\"xs\" name={h.user?.name || h.userId || \"User\"} />\r\n                  <Text fontWeight=\"bold\" fontSize=\"sm\">{h.user?.name || h.userId || \"User\"}</Text>\r\n                  <Text fontSize=\"xs\" color=\"gray.500\">{h.createdAt ? new Date(h.createdAt).toLocaleString() : \"\"}</Text>\r\n                </HStack>\r\n                <Text fontSize=\"sm\">{h.action} {h.payload ? JSON.stringify(h.payload) : ''}</Text>\r\n              </Box>\r\n            ))}\r\n          </VStack>\r\n        </Box>\r\n      </VStack>\r\n    </Flex>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}}]
}