{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Desktop/CRM/frontend/components/tables/DealsTable.tsx"],"sourcesContent":["\r\n\"use client\";\r\nimport { useEffect, useState } from 'react';\r\nimport DealForm from '../forms/DealForm';\r\n\r\nexport default function DealsTable() {\r\n  const [deals, setDeals] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [editDeal, setEditDeal] = useState<any | null>(null);\r\n  const [showEditModal, setShowEditModal] = useState(false);\r\n\r\n  const fetchDeals = () => {\r\n    setLoading(true);\r\n    fetch('/api/deals')\r\n      .then(async res => {\r\n        try {\r\n          const data = await res.json();\r\n          setDeals(Array.isArray(data) ? data : []);\r\n        } catch (e) {\r\n          setDeals([]);\r\n        }\r\n        setLoading(false);\r\n      });\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchDeals();\r\n  }, []);\r\n\r\n  const handleDelete = async (id: string) => {\r\n    if (!window.confirm('Delete this deal?')) return;\r\n    await fetch(`/api/deals/${id}`, { method: 'DELETE' });\r\n    fetchDeals();\r\n  };\r\n\r\n  const handleEdit = (deal: any) => {\r\n    setEditDeal(deal);\r\n    setShowEditModal(true);\r\n  };\r\n\r\n  const handleEditSubmit = async (data: any) => {\r\n    await fetch(`/api/deals/${editDeal.id}`, {\r\n      method: 'PATCH',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(data),\r\n    });\r\n    setShowEditModal(false);\r\n    setEditDeal(null);\r\n    fetchDeals();\r\n  };\r\n\r\n  if (loading) return <div>Loading deals...</div>;\r\n\r\n  return (\r\n    <div style={{ background: '#fafbfc', border: '1px solid #e0e0e0', borderRadius: 0, padding: 0, margin: '0 auto', maxWidth: 900 }}>\r\n      <table style={{ width: '100%', borderCollapse: 'collapse', background: 'none', fontSize: 15 }}>\r\n        <thead>\r\n          <tr style={{ background: '#f4f5f7', borderBottom: '1px solid #e0e0e0' }}>\r\n            <th style={{ fontWeight: 600, color: '#222', fontSize: 15, padding: '12px 8px', border: 'none', textAlign: 'left' }}>Name</th>\r\n            <th style={{ fontWeight: 600, color: '#222', fontSize: 15, padding: '12px 8px', border: 'none', textAlign: 'left' }}>Stage</th>\r\n            <th style={{ fontWeight: 600, color: '#222', fontSize: 15, padding: '12px 8px', border: 'none', textAlign: 'left' }}>Amount</th>\r\n            <th style={{ fontWeight: 600, color: '#222', fontSize: 15, padding: '12px 8px', border: 'none', textAlign: 'left' }}>Probability</th>\r\n            <th style={{ fontWeight: 600, color: '#222', fontSize: 15, padding: '12px 8px', border: 'none', textAlign: 'left' }}>Score</th>\r\n            <th style={{ fontWeight: 600, color: '#222', fontSize: 15, padding: '12px 8px', border: 'none', textAlign: 'left' }}>Owner</th>\r\n            <th style={{ fontWeight: 600, color: '#222', fontSize: 15, padding: '12px 8px', border: 'none', textAlign: 'left' }}>Expected Close</th>\r\n            <th style={{ fontWeight: 600, color: '#222', fontSize: 15, padding: '12px 8px', border: 'none', textAlign: 'left' }}>Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {deals.length === 0 && (\r\n            <tr>\r\n              <td colSpan={6} style={{ color: '#bbb', fontSize: 14, textAlign: 'center', padding: '24px 0' }}>───────────────</td>\r\n            </tr>\r\n          )}\r\n          {deals.map((d: any) => (\r\n            <tr key={d.id} style={{ borderBottom: '1px solid #e0e0e0', background: '#fff' }}>\r\n              <td style={{ padding: '10px 8px', border: 'none', color: '#23272f', fontWeight: 500 }}>{d.name}</td>\r\n              <td style={{ padding: '10px 8px', border: 'none', color: '#444' }}>{d.stageId}</td>\r\n              <td style={{ padding: '10px 8px', border: 'none', color: '#444' }}>{d.amount} {d.currency}</td>\r\n              <td style={{ padding: '10px 8px', border: 'none', color: '#444' }}>{d.probability}%</td>\r\n              <td style={{ padding: '10px 8px', border: 'none', color: '#444' }}>{d.dealScore}</td>\r\n              <td style={{ padding: '10px 8px', border: 'none', color: '#888', fontSize: 14 }}>{d.ownerUserId}</td>\r\n              <td style={{ padding: '10px 8px', border: 'none', color: '#888', fontSize: 14 }}>{d.expectedCloseDate ? new Date(d.expectedCloseDate).toLocaleDateString() : ''}</td>\r\n              <td style={{ padding: '10px 8px', border: 'none' }}>\r\n                <button onClick={() => handleEdit(d)} style={{ marginRight: 8, background: '#f4f5f7', color: '#0052cc', border: 'none', borderRadius: 4, padding: '4px 12px', cursor: 'pointer' }}>Edit</button>\r\n                <button onClick={() => handleDelete(d.id)} style={{ background: '#ff4d4f', color: '#fff', border: 'none', borderRadius: 4, padding: '4px 12px', cursor: 'pointer' }}>Delete</button>\r\n                {d.customFields && Object.keys(d.customFields).length > 0 && (\r\n                  <div style={{ marginTop: 4, fontSize: 12, color: '#888' }}>\r\n                    {Object.entries(d.customFields).map(([k, v]) => (\r\n                      <div key={k}><b>{k}:</b> {String(v)}</div>\r\n                    ))}\r\n                  </div>\r\n                )}\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n      {showEditModal && (\r\n        <div style={{ position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh', background: 'rgba(0,0,0,0.2)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000 }}>\r\n          <div style={{ background: '#fff', borderRadius: 8, padding: 24, minWidth: 320 }}>\r\n            <h3>Edit Deal</h3>\r\n            <DealForm onSubmit={handleEditSubmit} initialData={editDeal} />\r\n            <button onClick={() => setShowEditModal(false)} style={{ marginTop: 12, background: '#eee', color: '#333', border: 'none', borderRadius: 4, padding: '6px 16px', cursor: 'pointer' }}>Cancel</button>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 518, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Desktop/CRM/frontend/components/ui/Modal.tsx"],"sourcesContent":["import React from 'react';\r\n\r\nexport default function Modal({ open, onClose, title, children }: {\r\n  open: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  children: React.ReactNode;\r\n}) {\r\n  if (!open) return null;\r\n  return (\r\n    <div style={{\r\n      position: 'fixed', top: 0, left: 0, width: '100vw', height: '100vh',\r\n      background: 'rgba(0,0,0,0.3)', display: 'flex', alignItems: 'center', justifyContent: 'center', zIndex: 1000\r\n    }}>\r\n      <div style={{ background: '#fff', borderRadius: 8, minWidth: 400, padding: 32, position: 'relative' }}>\r\n        <button onClick={onClose} style={{ position: 'absolute', top: 12, right: 12, background: 'none', border: 'none', fontSize: 20, cursor: 'pointer' }}>×</button>\r\n        <h2 style={{ marginBottom: 24 }}>{title}</h2>\r\n        {children}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;;AAEe,SAAS,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE,QAAQ,EAK7D;IACC,IAAI,CAAC,MAAM,OAAO;IAClB,qBACE,0PAAC;QAAI,OAAO;YACV,UAAU;YAAS,KAAK;YAAG,MAAM;YAAG,OAAO;YAAS,QAAQ;YAC5D,YAAY;YAAmB,SAAS;YAAQ,YAAY;YAAU,gBAAgB;YAAU,QAAQ;QAC1G;kBACE,cAAA,0PAAC;YAAI,OAAO;gBAAE,YAAY;gBAAQ,cAAc;gBAAG,UAAU;gBAAK,SAAS;gBAAI,UAAU;YAAW;;8BAClG,0PAAC;oBAAO,SAAS;oBAAS,OAAO;wBAAE,UAAU;wBAAY,KAAK;wBAAI,OAAO;wBAAI,YAAY;wBAAQ,QAAQ;wBAAQ,UAAU;wBAAI,QAAQ;oBAAU;8BAAG;;;;;;8BACpJ,0PAAC;oBAAG,OAAO;wBAAE,cAAc;oBAAG;8BAAI;;;;;;gBACjC;;;;;;;;;;;;AAIT"}},
    {"offset": {"line": 592, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Desktop/CRM/frontend/app/%28app%29/deals/page.tsx"],"sourcesContent":["\"use client\";\r\nimport DealsTable from '../../../components/tables/DealsTable';\r\nimport Link from 'next/link';\r\nimport Modal from '../../../components/ui/Modal';\r\nimport DealForm from '../../../components/forms/DealForm';\r\nimport React, { useState } from 'react';\r\n\r\nexport default function DealsPage() {\r\n  const [modalOpen, setModalOpen] = useState(false);\r\n  const handleCreate = async (data: any) => {\r\n    await fetch('/api/deals', {\r\n      method: 'POST',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify(data),\r\n    });\r\n    setModalOpen(false);\r\n    // Optionally trigger a refresh (could use router.refresh or state)\r\n    window.location.reload();\r\n  };\r\n  return (\r\n    <div style={{ padding: 24 }}>\r\n      <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', marginBottom: 24 }}>\r\n        <h1>Deals</h1>\r\n        <div style={{ display: 'flex', gap: 12 }}>\r\n          <Link href=\"/deals/kanban\">\r\n            <button style={{ background: '#f4f5f7', color: '#0052cc', border: 'none', borderRadius: 6, padding: '8px 20px', fontWeight: 600, cursor: 'pointer' }}>Kanban View</button>\r\n          </Link>\r\n          <button onClick={() => setModalOpen(true)} style={{ background: '#0052cc', color: '#fff', border: 'none', borderRadius: 6, padding: '8px 20px', fontWeight: 600, cursor: 'pointer' }}>+ New Deal</button>\r\n        </div>\r\n      </div>\r\n      <div style={{ background: '#fff', borderRadius: 8, padding: 24 }}>\r\n        <DealsTable />\r\n      </div>\r\n      <Modal open={modalOpen} onClose={() => setModalOpen(false)} title=\"New Deal\">\r\n        <DealForm onSubmit={handleCreate} />\r\n      </Modal>\r\n    </div>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;AAOe,SAAS;IACtB,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,6NAAQ,EAAC;IAC3C,MAAM,eAAe,OAAO;QAC1B,MAAM,MAAM,cAAc;YACxB,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;QACvB;QACA,aAAa;QACb,mEAAmE;QACnE,OAAO,QAAQ,CAAC,MAAM;IACxB;IACA,qBACE,0PAAC;QAAI,OAAO;YAAE,SAAS;QAAG;;0BACxB,0PAAC;gBAAI,OAAO;oBAAE,SAAS;oBAAQ,gBAAgB;oBAAiB,YAAY;oBAAU,cAAc;gBAAG;;kCACrG,0PAAC;kCAAG;;;;;;kCACJ,0PAAC;wBAAI,OAAO;4BAAE,SAAS;4BAAQ,KAAK;wBAAG;;0CACrC,0PAAC,mLAAI;gCAAC,MAAK;0CACT,cAAA,0PAAC;oCAAO,OAAO;wCAAE,YAAY;wCAAW,OAAO;wCAAW,QAAQ;wCAAQ,cAAc;wCAAG,SAAS;wCAAY,YAAY;wCAAK,QAAQ;oCAAU;8CAAG;;;;;;;;;;;0CAExJ,0PAAC;gCAAO,SAAS,IAAM,aAAa;gCAAO,OAAO;oCAAE,YAAY;oCAAW,OAAO;oCAAQ,QAAQ;oCAAQ,cAAc;oCAAG,SAAS;oCAAY,YAAY;oCAAK,QAAQ;gCAAU;0CAAG;;;;;;;;;;;;;;;;;;0BAG1L,0PAAC;gBAAI,OAAO;oBAAE,YAAY;oBAAQ,cAAc;oBAAG,SAAS;gBAAG;0BAC7D,cAAA,0PAAC,0JAAU;;;;;;;;;;0BAEb,0PAAC,iJAAK;gBAAC,MAAM;gBAAW,SAAS,IAAM,aAAa;gBAAQ,OAAM;0BAChE,cAAA,0PAAC,uJAAQ;oBAAC,UAAU;;;;;;;;;;;;;;;;;AAI5B"}}]
}