{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Desktop/CRM/frontend/app/profile/page.tsx"],"sourcesContent":["\r\n\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\n\r\ninterface User {\r\n  id: string;\r\n  name: string;\r\n  email: string;\r\n  role: string;\r\n  avatarUrl?: string;\r\n  meta?: string;\r\n}\r\n\r\ninterface Task {\r\n  id: string;\r\n  title: string;\r\n  status: string;\r\n  dueDate?: string;\r\n}\r\n\r\nexport default function UserProfilePage() {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [tasks, setTasks] = useState<Task[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    Promise.all([\r\n      fetch('/api/users/me').then(async res => {\r\n        try {\r\n          const data = await res.json();\r\n          return data;\r\n        } catch { return null; }\r\n      }),\r\n      fetch('/api/tasks?assignedToMe=true').then(async res => {\r\n        try {\r\n          const data = await res.json();\r\n          return Array.isArray(data) ? data : [];\r\n        } catch { return []; }\r\n      })\r\n    ]).then(([userData, tasksData]) => {\r\n      setUser(userData);\r\n      setTasks(tasksData);\r\n      setLoading(false);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ padding: 32, maxWidth: 700, margin: '0 auto' }}>\r\n      <h1 style={{ marginBottom: 32, fontSize: 22, fontWeight: 700, color: '#23272f' }}>Profile</h1>\r\n      <div style={{ background: '#fff', borderRadius: 12, border: '1px solid #e5e7eb', padding: 32, display: 'flex', alignItems: 'center', gap: 32, marginBottom: 32 }}>\r\n        {user ? (\r\n          <>\r\n            <img src={user.avatarUrl || '/avatar.svg'} alt=\"avatar\" style={{ width: 96, height: 96, borderRadius: '50%', objectFit: 'cover', background: '#f3f4f6', border: '2px solid #e5e7eb' }} />\r\n            <div>\r\n              <div style={{ fontSize: 20, fontWeight: 700, color: '#23272f', marginBottom: 4 }}>{user.name}</div>\r\n              <div style={{ fontSize: 15, color: '#64748b', marginBottom: 8 }}>{user.email}</div>\r\n              <div style={{ fontSize: 13, color: '#2563eb', fontWeight: 600, marginBottom: 8 }}>{user.role}</div>\r\n              {user.meta && <div style={{ fontSize: 13, color: '#94a3b8', marginBottom: 8 }}>{user.meta}</div>}\r\n              {user.role === 'ADMIN' ? (\r\n                <div style={{ marginTop: 16 }}>\r\n                  <div style={{ fontSize: 14, fontWeight: 600, color: '#23272f', marginBottom: 8 }}>Admin Actions</div>\r\n                  <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\r\n                    <li style={{ marginBottom: 8, fontSize: 14, color: '#2563eb' }}>View all users</li>\r\n                    <li style={{ marginBottom: 8, fontSize: 14, color: '#2563eb' }}>Manage roles</li>\r\n                    <li style={{ marginBottom: 8, fontSize: 14, color: '#2563eb' }}>Access audit logs</li>\r\n                  </ul>\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </>\r\n        ) : (\r\n          <div style={{ color: '#888', fontSize: 15 }}>Loading user...</div>\r\n        )}\r\n      </div>\r\n      <div style={{ background: '#f8fafc', borderRadius: 12, padding: 32 }}>\r\n        <div style={{ fontSize: 16, fontWeight: 600, color: '#23272f', marginBottom: 16 }}>Assigned Tasks</div>\r\n        {loading ? (\r\n          <div style={{ color: '#888', fontSize: 14 }}>Loading tasks...</div>\r\n        ) : tasks.length === 0 ? (\r\n          <div style={{ color: '#888', fontSize: 14 }}>No assigned tasks.</div>\r\n        ) : (\r\n          <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\r\n            {tasks.map(task => (\r\n              <li key={task.id} style={{ marginBottom: 18, padding: 0, fontSize: 15, color: '#23272f', display: 'flex', alignItems: 'center', gap: 12 }}>\r\n                <span style={{ fontWeight: 600 }}>{task.title}</span>\r\n                <span style={{ fontSize: 13, color: '#64748b', fontWeight: 500 }}>{task.status}</span>\r\n                {task.dueDate && <span style={{ fontSize: 13, color: '#94a3b8' }}>Due: {new Date(task.dueDate).toLocaleDateString()}</span>}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}