{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Desktop/CRM/frontend/app/activity/page.tsx"],"sourcesContent":["\r\n\"use client\";\r\nimport React, { useEffect, useState } from 'react';\r\n\r\ninterface Activity {\r\n  id: string;\r\n  actorUserId: string;\r\n  actorName?: string;\r\n  entityType: string;\r\n  entityId: string;\r\n  action: string;\r\n  entityName?: string;\r\n  details?: string;\r\n  createdAt: string;\r\n}\r\n\r\nfunction formatTime(dateStr: string) {\r\n  const d = new Date(dateStr);\r\n  return d.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });\r\n}\r\n\r\nexport default function ActivityFeedPage() {\r\n  const [activities, setActivities] = useState<Activity[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    fetch('/api/activity?limit=20')\r\n      .then(async res => {\r\n        try {\r\n          const data = await res.json();\r\n          setActivities(Array.isArray(data) ? data : []);\r\n        } catch {\r\n          setActivities([]);\r\n        }\r\n        setLoading(false);\r\n      });\r\n  }, []);\r\n\r\n  return (\r\n    <div style={{ padding: 24 }}>\r\n      <h1 style={{ marginBottom: 24, fontSize: 18, fontWeight: 700 }}>Activity Feed</h1>\r\n      <div style={{ background: '#fff', borderRadius: 8, padding: 32, minHeight: 320 }}>\r\n        {loading ? (\r\n          <div style={{ color: '#888', fontSize: 14 }}>Loading...</div>\r\n        ) : (\r\n          <ul style={{ listStyle: 'none', padding: 0, margin: 0 }}>\r\n            {activities.length === 0 ? (\r\n              <li style={{ color: '#888', fontSize: 14 }}>No activity found.</li>\r\n            ) : (\r\n              activities.map(act => (\r\n                <li key={act.id} style={{ marginBottom: 20, fontSize: 15, color: '#23272f' }}>\r\n                  <span style={{ fontWeight: 700 }}>{formatTime(act.createdAt)}</span>\r\n                  {act.action === 'COMMENT' ? (\r\n                    <> - Comment added by <b>{act.actorName || act.actorUserId}</b></>\r\n                  ) : act.action === 'UPDATE' && act.entityType === 'Task' ? (\r\n                    <> - Task <b>{act.entityName || act.entityId}</b> updated by <b>{act.actorName || act.actorUserId}</b></>\r\n                  ) : act.action === 'COMPLETE' && act.entityType === 'Task' ? (\r\n                    <> - Task <b>{act.entityName || act.entityId}</b> marked complete by <b>{act.actorName || act.actorUserId}</b></>\r\n                  ) : act.action === 'UPDATE' && act.entityType === 'Deal' ? (\r\n                    <> - Deal <b>{act.entityName || act.entityId}</b> updated by <b>{act.actorName || act.actorUserId}</b></>\r\n                  ) : act.action === 'MOVE' && act.entityType === 'Deal' ? (\r\n                    <> - Deal <b>{act.entityName || act.entityId}</b> moved to <b>{act.details}</b> by <b>{act.actorName || act.actorUserId}</b></>\r\n                  ) : act.action === 'CREATE' && act.entityType === 'TimeEntry' ? (\r\n                    <> - Time entry <b>{act.details}</b> logged on <b>{act.entityName || act.entityId}</b> by <b>{act.actorName || act.actorUserId}</b></>\r\n                  ) : (\r\n                    <> - {act.action} <b>{act.entityName || act.entityId}</b> by <b>{act.actorName || act.actorUserId}</b></>\r\n                  )}\r\n                </li>\r\n              ))\r\n            )}\r\n          </ul>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}